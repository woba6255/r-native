(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{137:function(e,t,n){e.exports=n(280)},142:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(42),u=n.n(c),o=(n(142),n(126)),i=n(18);function l(e){return a.a.createElement(i.a,{path:e.path,exact:e.exact,render:function(t){return a.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}function s(e){var t=e.routes;return a.a.createElement(i.c,null,t.map((function(e,t){return a.a.createElement(l,Object.assign({key:e.key},e))})),a.a.createElement(i.a,{component:function(){return a.a.createElement("h1",null,"404 Not Found!")}}))}var m=n(33),d=n(15),f=n.n(d),p=n(20),h=n(49),v=n(50),E={url:""};var y=function(e){var t=arguments;return Object(p.a)(f.a.mark((function n(){var r,a,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(t.length>1&&void 0!==t[1])||t[1],a=t.length>2&&void 0!==t[2]?t[2]:E.url,n.prev=2,n.next=5,fetch(a+e,{method:"GET"});case 5:if(c=n.sent,!0!==r){n.next=12;break}return n.next=9,c.json();case 9:n.t0=n.sent,n.next=13;break;case 12:n.t0=c;case 13:return n.abrupt("return",n.t0);case 16:throw n.prev=16,n.t1=n.catch(2),new Error(n.t1);case 19:case"end":return n.stop()}}),n,null,[[2,16]])})))()},b=function(e){var t=arguments;return Object(p.a)(f.a.mark((function n(){var r,a,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(t.length>1&&void 0!==t[1])||t[1],a=t.length>2&&void 0!==t[2]?t[2]:E.url,n.prev=2,n.next=5,fetch(a+e,{method:"DELETE"});case 5:if(c=n.sent,!0!==r){n.next=12;break}return n.next=9,c.json();case 9:n.t0=n.sent,n.next=13;break;case 12:n.t0=c;case 13:return n.abrupt("return",n.t0);case 16:throw n.prev=16,n.t1=n.catch(2),new Error(n.t1);case 19:case"end":return n.stop()}}),n,null,[[2,16]])})))()},g=function(e,t){var n=arguments;return Object(p.a)(f.a.mark((function r(){var a,c,u;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=!(n.length>2&&void 0!==n[2])||n[2],c=n.length>3&&void 0!==n[3]?n[3]:E.url,r.prev=2,r.next=5,fetch(c+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 5:if(u=r.sent,!0!==a){r.next=12;break}return r.next=9,u.json();case 9:r.t0=r.sent,r.next=13;break;case 12:r.t0=u;case 13:return r.abrupt("return",r.t0);case 16:throw r.prev=16,r.t1=r.catch(2),new Error(r.t1);case 19:case"end":return r.stop()}}),r,null,[[2,16]])})))()},O=function(e,t){var n=arguments;return Object(p.a)(f.a.mark((function r(){var a,c,u;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=!(n.length>2&&void 0!==n[2])||n[2],c=n.length>3&&void 0!==n[3]?n[3]:E.url,r.prev=2,r.next=5,fetch(c+e,{method:"PATCH",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}});case 5:if(u=r.sent,!0!==a){r.next=12;break}return r.next=9,u.json();case 9:r.t0=r.sent,r.next=13;break;case 12:r.t0=u;case 13:return r.abrupt("return",r.t0);case 16:throw r.prev=16,r.t1=r.catch(2),new Error(r.t1);case 19:case"end":return r.stop()}}),r,null,[[2,16]])})))()},w=n(3),x=n.n(w),j=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,null,[{key:"getAll",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("/posts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createOne",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/posts",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOneByID",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOne",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:t.id,e.next=3,O("/posts/"+n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();j.postType=x.a.shape({id:x.a.string,date:x.a.string,commentsID:x.a.arrayOf(x.a.number),deleted:x.a.bool,author:x.a.string,title:x.a.string,body:x.a.string}),j.postsType=x.a.arrayOf(j.postType);var T=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,null,[{key:"getAll",value:function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"r3s0r",date:"2020-05-28T10:36:57.753Z",temperature:"123"},{id:"gdgmj9",date:"2020-05-28T10:47:33.571Z",temperature:"100"},{id:"ikzhc",date:"2020-05-28T10:47:37.551Z",temperature:"50"},{id:"rrkh1",date:"2020-05-28T11:55:19.096Z",temperature:"22"},{id:"bqbx4j",date:"2020-05-28T11:59:10.529Z",temperature:"33"},{id:"0yrw8",date:"2020-05-28T12:04:43.886Z",temperature:"22"},{id:"vkaazcf",date:"2020-05-28T14:05:41.030Z",temperature:"-10"},{id:"x8r35",date:"2020-05-28T14:05:00.000Z",temperature:"30"},{id:"as5hg",date:"2020-05-28T15:00:42.459Z",temperature:"-20"},{id:"fcc8c6",date:"2020-05-28T15:08:35.942Z",temperature:"20"}]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createOne",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("/metrics",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOneByID",value:function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/metrics/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOne",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:t.id,e.next=3,O("/metrics/"+n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=n(37),C="EDIT",S="CREATED",D={},I=function(e,t){var n=t.type||"UPDATE",r=t.payload||t;switch(n){case"UPDATE":return d(Object(k.a)(Object(k.a)({},e),r));case"SAVE_ROW":var a=r.id,c=Object.assign([],e.data),u=c.findIndex((function(e){return e.id===a}));return c[u]=Object.assign({},c[u],t.payload),d(Object(k.a)(Object(k.a)({},e),{},{data:c}));case"CREATE_ROW":var o=Object.assign([],e.data);return o.push(r),Object(k.a)(Object(k.a)({},e),{},{data:o});case"DELETE_ROW":var i=Object.assign([],e.data),l=i.findIndex((function(e){return e.id===r}));return i.splice(l,1),d(Object(k.a)(Object(k.a)({},e),{},{data:i}));case"DELETE_CREATE_ROW":var s=Object.assign([],e.data),m=s.findIndex((function(e){return e.id===r}));return s.splice(m,1),Object(k.a)(Object(k.a)({},e),{},{data:s});default:return e;var d}},A=a.a.createContext();function R(e){var t=e.children,n=a.a.useReducer(I,D),r=Object(m.a)(n,2),c=r[0],u=r[1];return a.a.createElement(A.Provider,{value:{state:c,dispatch:u}},t)}var W=function(){return a.a.useContext(A)},N=n(305),_=n(95),B=n(128),F=n(106),M=(n(148),n(108)),L=n(129),P=n(127),H=n(302),Z=n(300),U=n(122),J=n.n(U);function z(e){var t=e.cellSchema,n=e.cellState,r=void 0===n?"":n,c=e.onCellChange,u=e.editing,o=t.role,i=t.styles,l=t.formater,s=l?l(r):r;function m(e){c(e.target.value)}switch(o){case"ID":case"STATIC":return a.a.createElement(Y,{style:i,value:s});case"INPUT":return a.a.createElement(G,{style:i,editing:u,onChange:function(e){return m(e)},value:s});case"TEXT_AREA":return a.a.createElement(V,{style:i,editing:u,onChange:function(e){return m(e)},value:s});case"DATE":return a.a.createElement(q,{style:i,editing:u,s:r,onChange:function(e){return c(e)},date:s,onChange1:function(e){return m(e)}});default:return a.a.createElement(X,{style:i})}}function G(e){return a.a.createElement(N.a.TextCell,{style:e.style},!0===e.editing?a.a.createElement(H.a,{width:"100%",onChange:e.onChange,value:e.value}):e.value)}function V(e){return a.a.createElement(N.a.TextCell,{style:e.style},!0===e.editing?a.a.createElement(Z.a,{style:{marginTop:"10px",marginBottom:"10px"},minHeight:"auto",heigth:"10px",width:"100%",resize:"vertical",onChange:e.onChange,value:e.value}):e.value)}function X(e){return a.a.createElement(N.a.TextCell,{style:e.style},"Not found(")}function Y(e){return a.a.createElement(N.a.TextCell,{style:e.style},e.value)}function q(e){return a.a.createElement(N.a.TextCell,{style:e.style},!0===e.editing?a.a.createElement(J.a,{selected:Date.parse(e.s),onChange:e.onChange,customInput:a.a.createElement($,{date:e.date,onChange:e.onChange1}),timeIntervals:1,timeFormat:"HH:mm",showTimeSelect:!0}):e.date)}var $=function(e){Object(L.a)(n,e);var t=Object(P.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(H.a,{onClick:this.props.onClick,onChange:function(t){return e.props.onChange(t)},value:this.props.date})}}]),n}(a.a.Component),K=n(306),Q=n(301),ee=n(307),te=n(109),ne={maxWidth:"4rem"};function re(e){var t=e.menuItems;return a.a.createElement(K.a,{position:Q.a.BOTTOM_LEFT,content:a.a.createElement(ee.a,null,a.a.createElement(ee.a.Group,null,t.map((function(e){return a.a.createElement(ee.a.Item,Object.assign({},e,{key:e.title}),e.title)}))))},a.a.createElement(te.a,{style:{cursor:"pointer"}}))}function ae(e){var t=e.rowID,n=e.schema,c=e.rowStatus,u=e.setEditingRow,o=W(),i=o.state,l=o.dispatch,s=i.schema.eventsMiddleware,d=Object(r.useState)(y()),h=Object(m.a)(d,2),v=h[0],E=h[1];function y(){return i.data.find((function(e){return e.id===t}))}function b(e,t){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t(n);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){E(y()),u(null)},w=function(){u({id:t,status:C})},x=function(){u(null)},j=function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,b(s.onSaveNewRow,v);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},T=function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(s.onDdleteNewRow,v.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_CREATE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},k=function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(s.onDelete,v.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},D=function(){return Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,b(s.onSave,v);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},I=[{icon:"edit",title:"Edit",color:"muted",style:{cursor:"pointer"},onSelect:function(){return w()},on:["STATIC"]},{icon:"tick-circle",title:"Save",onSelect:function(){return D()},on:[C]},{icon:"tick-circle",title:"Create",onSelect:function(){return j()},on:[S]},{icon:"cross",title:"Cancel",onSelect:function(){return x()},on:[C]},{icon:"arrow-left",title:"Return",onSelect:function(){return O()},on:[C]},{icon:"trash",title:"Delete",onSelect:function(){return k()},on:[C,"STATIC"]},{icon:"trash",title:"Delete",onSelect:function(){return T()},on:[S]}].filter((function(e){return 0===e.on.length||e.on.includes(c)}));return a.a.createElement(N.a.Row,{height:"auto",style:{minHeight:"45px"}},n.body.map((function(e){var t=e.key,n=v[t],r=[C,S].includes(c);return a.a.createElement(z,{key:t,cellState:n,onCellChange:function(e){var n=Object.assign({},v);n[t]=e,E(n)},cellSchema:e,editing:r})})),a.a.createElement(N.a.Cell,{style:ne},"STATIC_DISABLED"===c?a.a.createElement(M.a,null):a.a.createElement(re,{menuItems:I})))}function ce(e){var t=e.data,n=e.schema,c=Object(r.useState)(null),u=Object(m.a)(c,2),o=u[0],i=u[1],l=W(),s=l.state,d=l.dispatch,h=n.eventsMiddleware;Object(r.useEffect)((function(){d({schema:n,data:t})}),[]);var v=function(){return Object(p.a)(f.a.mark((function e(){var t,n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=h.onRowCreate(),n=Object(m.a)(t,2),r=n[0],a=n[1],r&&r.id&&a&&i({id:r.id,status:S}),d({type:"CREATE_ROW",payload:r});case 3:case"end":return e.stop()}}),e)})))()};return s.data?a.a.createElement("div",null,a.a.createElement(N.a,null,a.a.createElement(N.a.Head,null,n.body.map((function(e,t){return a.a.createElement(N.a.TextHeaderCell,{style:e.styles,key:t},e.header)})),a.a.createElement(N.a.TextHeaderCell,{style:ne})),a.a.createElement(N.a.Body,{style:{overflowY:"scroll"}},s.data&&s.data.map((function(e){var t=o&&e.id===o.id?o.status:null===o?"STATIC":"STATIC_DISABLED";return a.a.createElement(ae,{key:e.id,rowID:e.id,schema:n,rowStatus:t,setEditingRow:i})})))),a.a.createElement(_.a,{display:"flex",alignItems:"center",justifyContent:"center",margin:"7px"},null===o&&a.a.createElement(B.a,{onClick:function(){return v()}},a.a.createElement(F.a,null)))):a.a.createElement("p",null,"No data...")}function ue(e){return a.a.createElement(R,null,a.a.createElement(ce,e))}var oe={maxWidth:"5rem"};function ie(e){var t=e.posts,n={onStableStateChange:function(e){console.log(e)},onSave:function(e){return j.editOne(e).then((function(e){return alert("Saved!")})),e},onDelete:function(e){return j.deleteOneByID(e).then((function(e){return alert("DELETED!")})),e},onSaveNewRow:function(e){return j.createOne(e).then((function(e){return alert("Saved!")})),e},onRowCreate:function(){return[{id:Math.random().toString(36).substring(7),date:new Date},!0]}};return a.a.createElement(ue,{data:t,schema:{eventsMiddleware:n,body:[{header:"#",styles:oe,key:"id",role:"ID",formater:function(e){return function(e){return e.length>6?"..."+e.slice(e.length-6):e}(e)}},{header:"Date",key:"date",role:"DATE",formater:function(e){return function(e){return e?new Intl.DateTimeFormat("ru",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e)):"No Date detected"}(e)}},{header:"Author",key:"author",role:"INPUT"},{header:"Title",key:"title",role:"INPUT"}]}})}var le=n(303),se=n(304);function me(){var e=Object(i.f)();return a.a.createElement(_.a,{marginBottom:10,elevation:2,padding:12},a.a.createElement(B.a,{height:Object(le.a)(5),appearance:"minimal",intent:"warning",margin:Object(se.a)(1),onClick:function(){return e.push(je)}},"Home"),a.a.createElement(B.a,{height:Object(le.a)(5),appearance:"minimal",intent:"warning",margin:Object(se.a)(1),onClick:function(){return e.push(ke)}},"METRICS"),a.a.createElement(B.a,{height:Object(le.a)(5),appearance:"minimal",intent:"warning",margin:Object(se.a)(1),onClick:function(){return e.push(Te)}},"Posts"))}function de(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){0===n.length&&j.getAll().then((function(e){return c(e)}))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(me,null),n.length?a.a.createElement(ie,{posts:n}):a.a.createElement("p",null,"Waiting..."))}var fe={maxWidth:"5rem"};function pe(e){var t=e.setMetrics;return{eventsMiddleware:{onStableStateChange:function(e){t(e)},onSave:function(e){return T.editOne(e).then((function(e){return console.log("Saved!")})),e},onDelete:function(e){return T.deleteOneByID(e).then((function(e){return console.log("DELETED!")})),e},onSaveNewRow:function(e){return T.createOne(e).then((function(e){return console.log("Saved!")})),e},onRowCreate:function(){return[{id:Math.random().toString(36).substring(7),date:new Date},!0]}},body:[{header:"Date",key:"date",role:"DATE",formater:function(e){return function(e){return e?new Intl.DateTimeFormat("ru",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e)):"No Date detected"}(e)}},{header:"\xb0\u0421",styles:fe,key:"temperature",role:"INPUT"}]}}function he(e){return a.a.createElement("div",null,e.metrics.length?a.a.createElement(ue,{data:e.metrics,schema:pe(e)}):a.a.createElement("p",null,"Waiting..."))}var ve=n(125),Ee=n.n(ve);function ye(e){var t=e.metrics,n=Object(r.createRef)();return Object(r.useEffect)((function(){if(t.length){var e=t.map((function(e){return new Intl.DateTimeFormat("ru",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e.date))})),r=t.map((function(e){return e.temperature}));new Ee.a(n.current.getContext("2d"),{type:"line",data:{labels:e,datasets:[{label:"Temperature",data:r}]},options:{}})}}),[t]),a.a.createElement("div",null,a.a.createElement("canvas",{id:"myChart",ref:n}))}function be(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(n),o=Object(m.a)(u,2),i=o[0],l=o[1];return Object(r.useEffect)((function(){T.getAll().then((function(e){c(e),l(e)}))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(he,{metrics:i,setMetrics:c}),a.a.createElement(ye,{metrics:n,setMetrics:c}))}function ge(e){var t=e.children;return a.a.createElement(_.a,{elevation:1,borderLeft:"5px solid #dae4fc",style:{},paddingY:"1rem",paddingX:"1rem",marginX:"1rem"},t)}function Oe(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(me,null),a.a.createElement(be,null))}function we(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(me,null),a.a.createElement(ge,null,a.a.createElement("p",null,"Home!!!")))}function xe(e){var t=e.children;return a.a.createElement(o.a,null,a.a.createElement(s,{routes:[{path:je,key:"ROOT",exact:!0,component:we},{path:Te,key:"PE",exact:!0,component:de},{path:ke,key:"GT",component:s,routes:[{path:ke,key:"Index",exact:!0,component:Oe}]}]}),t)}var je="/",Te="/post-editor",ke="/metrics";var Ce=function(){return a.a.createElement("div",null,a.a.createElement(xe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.a8b029dc.chunk.js.map