(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{138:function(e,t,n){e.exports=n(281)},143:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),u=n.n(c),i=(n(143),n(127)),o=n(18);function l(e){return r.a.createElement(o.a,{path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}function s(e){var t=e.routes;return r.a.createElement(o.c,null,t.map((function(e,t){return r.a.createElement(l,Object.assign({key:e.key},e))})),r.a.createElement(o.a,{component:function(){return r.a.createElement("h1",null,"404 Not Found!")}}))}var m=n(40),d=n(36),f="EDIT",p="CREATED",h={},E=function(e,t){var n=t.type||"UPDATE",a=t.payload||t;switch(n){case"UPDATE":return v(Object(d.a)(Object(d.a)({},e),a),e);case"SAVE_ROW":var r=a.id,c=Object.assign([],e.data),u=c.findIndex((function(e){return e.id===r}));return c[u]=Object.assign({},c[u],t.payload),v(Object(d.a)(Object(d.a)({},e),{},{data:c}),e);case"CREATE_ROW":var i=Object.assign([],e.data);return i.push(a),Object(d.a)(Object(d.a)({},e),{},{data:i});case"DELETE_ROW":var o=Object.assign([],e.data),l=o.findIndex((function(e){return e.id===a}));return o.splice(l,1),v(Object(d.a)(Object(d.a)({},e),{},{data:o}),e);case"DELETE_CREATE_ROW":var s=Object.assign([],e.data),m=s.findIndex((function(e){return e.id===a}));return s.splice(m,1),Object(d.a)(Object(d.a)({},e),{},{data:s});default:return e}};function v(e,t){return t.schema&&t.schema.eventsMiddleware.onStableStateChange&&t.schema.eventsMiddleware.onStableStateChange(e.data),e}var y=r.a.createContext();function g(e){var t=e.children,n=r.a.useReducer(E,h),a=Object(m.a)(n,2),c=a[0],u=a[1];return r.a.createElement(y.Provider,{value:{state:c,dispatch:u}},t)}var b=function(){return r.a.useContext(y)},O=n(16),w=n.n(O),T=n(25),j=n(306),C=n(96),x=n(129),k=n(107),S=(n(149),n(109)),D=n(49),I=n(50),R=n(130),A=n(128),_=n(303),W=n(301),M=n(123),B=n.n(M);function L(e){var t=e.cellSchema,n=e.cellState,a=void 0===n?"":n,c=e.onCellChange,u=e.editing,i=t.role,o=t.styles,l=t.formater,s=l?l(a):a;function m(e){c(e.target.value)}switch(i){case"ID":case"STATIC":return r.a.createElement(F,{style:o,value:s});case"INPUT":return r.a.createElement(Z,{style:o,editing:u,onChange:function(e){return m(e)},value:s});case"TEXT_AREA":return r.a.createElement(H,{style:o,editing:u,onChange:function(e){return m(e)},value:s});case"DATE":return r.a.createElement(P,{style:o,editing:u,s:a,onChange:function(e){return c(e)},date:s,onChange1:function(e){return m(e)}});default:return r.a.createElement(N,{style:o})}}function Z(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(_.a,{width:"100%",onChange:e.onChange,value:e.value}):e.value)}function H(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(W.a,{style:{marginTop:"10px",marginBottom:"10px"},minHeight:"auto",heigth:"10px",width:"100%",resize:"vertical",onChange:e.onChange,value:e.value}):e.value)}function N(e){return r.a.createElement(j.a.TextCell,{style:e.style},"Not found(")}function F(e){return r.a.createElement(j.a.TextCell,{style:e.style},e.value)}function P(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(B.a,{selected:Date.parse(e.s),onChange:e.onChange,customInput:r.a.createElement(U,{date:e.date,onChange:e.onChange1}),timeIntervals:1,timeFormat:"HH:mm",showTimeSelect:!0}):e.date)}var U=function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(D.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(_.a,{onClick:this.props.onClick,onChange:function(t){return e.props.onChange(t)},value:this.props.date})}}]),n}(r.a.Component),z=n(307),G=n(302),V=n(308),X=n(110),J={maxWidth:"4rem"};function Y(e){var t=e.menuItems;return r.a.createElement(z.a,{position:G.a.BOTTOM_LEFT,content:r.a.createElement(V.a,null,r.a.createElement(V.a.Group,null,t.map((function(e){return r.a.createElement(V.a.Item,Object.assign({},e,{key:e.title}),e.title)}))))},r.a.createElement(X.a,{style:{cursor:"pointer"}}))}function q(e){var t=e.rowID,n=e.schema,c=e.rowStatus,u=e.setEditingRow,i=b(),o=i.state,l=i.dispatch,s=o.schema.eventsMiddleware,d=Object(a.useState)(y()),h=Object(m.a)(d,2),E=h[0],v=h[1];function y(){return o.data.find((function(e){return e.id===t}))}function g(e,t){return O.apply(this,arguments)}function O(){return(O=Object(T.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t(n);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){v(y()),u(null)},x=function(){u({id:t,status:f})},k=function(){u(null)},D=function(){return Object(T.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,g(s.onSaveNewRow,E);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},I=function(){return Object(T.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(s.onDdleteNewRow,E.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_CREATE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},R=function(){return Object(T.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(s.onDelete,E.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},A=function(){return Object(T.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,g(s.onSave,E);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},_=[{icon:"edit",title:"Edit",color:"muted",style:{cursor:"pointer"},onSelect:function(){return x()},on:["STATIC"]},{icon:"tick-circle",title:"Save",onSelect:function(){return A()},on:[f]},{icon:"tick-circle",title:"Create",onSelect:function(){return D()},on:[p]},{icon:"cross",title:"Cancel",onSelect:function(){return k()},on:[f]},{icon:"arrow-left",title:"Return",onSelect:function(){return C()},on:[f]},{icon:"trash",title:"Delete",onSelect:function(){return R()},on:[f,"STATIC"]},{icon:"trash",title:"Delete",onSelect:function(){return I()},on:[p]}].filter((function(e){return 0===e.on.length||e.on.includes(c)}));return r.a.createElement(j.a.Row,{height:"auto",style:{minHeight:"45px"}},n.body.map((function(e){var t=e.key,n=E[t],a=[f,p].includes(c);return r.a.createElement(L,{key:t,cellState:n,onCellChange:function(e){var n=Object.assign({},E);n[t]=e,v(n)},cellSchema:e,editing:a})})),r.a.createElement(j.a.Cell,{style:J},"STATIC_DISABLED"===c?r.a.createElement(S.a,null):r.a.createElement(Y,{menuItems:_})))}function $(e){var t=e.data,n=e.schema,c=Object(a.useState)(null),u=Object(m.a)(c,2),i=u[0],o=u[1],l=b(),s=l.state,d=l.dispatch,f=n.eventsMiddleware;Object(a.useEffect)((function(){d({schema:n,data:t})}),[]);var h=function(){return Object(T.a)(w.a.mark((function e(){var t,n,a,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.onRowCreate(),n=Object(m.a)(t,2),a=n[0],r=n[1],a&&a.id&&r&&o({id:a.id,status:p}),d({type:"CREATE_ROW",payload:a});case 3:case"end":return e.stop()}}),e)})))()};return s.data?r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement(j.a.Head,null,n.body.map((function(e,t){return r.a.createElement(j.a.TextHeaderCell,{style:e.styles,key:t},e.header)})),r.a.createElement(j.a.TextHeaderCell,{style:J})),r.a.createElement(j.a.Body,{style:{overflowY:"scroll"}},s.data&&s.data.map((function(e){var t=i&&e.id===i.id?i.status:null===i?"STATIC":"STATIC_DISABLED";return r.a.createElement(q,{key:e.id,rowID:e.id,schema:n,rowStatus:t,setEditingRow:o})})))),r.a.createElement(C.a,{display:"flex",alignItems:"center",justifyContent:"center",margin:"7px"},null===i&&r.a.createElement(x.a,{onClick:function(){return h()}},r.a.createElement(k.a,null)))):r.a.createElement("p",null,"No data...")}function K(e){return r.a.createElement(g,null,r.a.createElement($,e))}var Q=n(61),ee=n.n(Q),te=n(3),ne=n.n(te),ae=function(){function e(){Object(D.a)(this,e)}return Object(I.a)(e,null,[{key:"getAll",value:function(){var e=Object(T.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.GET("/posts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createOne",value:function(){var e=Object(T.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.POST("/posts",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOneByID",value:function(){var e=Object(T.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.DELETE("/posts/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOne",value:function(){var e=Object(T.a)(w.a.mark((function e(t){var n,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:t.id,e.next=3,ee.a.PUT("/posts/"+n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ae.postType=ne.a.shape({id:ne.a.string,date:ne.a.string,commentsID:ne.a.arrayOf(ne.a.number),deleted:ne.a.bool,author:ne.a.string,title:ne.a.string,body:ne.a.string}),ae.postsType=ne.a.arrayOf(ae.postType);var re=[{id:"r3s0r",date:"2020-05-28T10:36:57.753Z",temperature:"123"},{id:"gdgmj9",date:"2020-05-28T10:47:33.571Z",temperature:"100"},{id:"ikzhc",date:"2020-05-28T10:47:37.551Z",temperature:"50"},{id:"rrkh1",date:"2020-05-28T11:55:19.096Z",temperature:"22"},{id:"bqbx4j",date:"2020-05-28T11:59:10.529Z",temperature:"33"},{id:"0yrw8",date:"2020-05-28T12:04:43.886Z",temperature:"22"},{id:"vkaazcf",date:"2020-05-28T14:05:41.030Z",temperature:"-10"},{id:"x8r35",date:"2020-05-28T14:05:00.000Z",temperature:"30"},{id:"as5hg",date:"2020-05-28T15:00:42.459Z",temperature:"-20"},{id:"fcc8c6",date:"2020-05-28T15:08:35.942Z",temperature:"20"}],ce=function(){function e(){Object(D.a)(this,e)}return Object(I.a)(e,null,[{key:"getAll",value:function(){var e=Object(T.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createOne",value:function(){var e=Object(T.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.push(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOneByID",value:function(){var e=Object(T.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.splice(re.findIndex((function(e){return e.id===t})),1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOne",value:function(){var e=Object(T.a)(w.a.mark((function e(t){var n,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:t.id,e.abrupt("return",re[re.findIndex((function(e){return e.id===n}))]=t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ue={maxWidth:"5rem"};function ie(e){var t=e.setMetrics;return{eventsMiddleware:{onStableStateChange:function(e){t(e)},onSave:function(e){return ce.editOne(e).then((function(e){return console.log("Saved!")})),e},onDelete:function(e){return ce.deleteOneByID(e).then((function(e){return console.log("DELETED!")})),e},onSaveNewRow:function(e){return ce.createOne(e).then((function(e){return console.log("Saved!")})),e},onRowCreate:function(){return[{id:Math.random().toString(36).substring(7),date:new Date},!0]}},body:[{header:"Date",key:"date",role:"DATE",formater:function(e){return function(e){return e?new Intl.DateTimeFormat("ru",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e)):"No Date detected"}(e)}},{header:"\xb0\u0421",styles:ue,key:"temperature",role:"INPUT"}]}}function oe(e){return r.a.createElement("div",null,e.metrics.length?r.a.createElement(K,{data:e.metrics,schema:ie(e)}):r.a.createElement("p",null,"Waiting..."))}var le=n(126),se=n.n(le);function me(e){var t=e.metrics,n=Object(a.createRef)();return Object(a.useEffect)((function(){if(t.length){var e=t.map((function(e){return new Intl.DateTimeFormat("ru",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e.date))})),a=t.map((function(e){return e.temperature}));new se.a(n.current.getContext("2d"),{type:"line",data:{labels:e,datasets:[{label:"Temperature",data:a}]},options:{}})}}),[t]),r.a.createElement("div",null,r.a.createElement("canvas",{id:"myChart",ref:n}))}function de(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(n),i=Object(m.a)(u,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){ce.getAll().then((function(e){c(e),l(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{metrics:o,setMetrics:c}),r.a.createElement(me,{metrics:n,setMetrics:c}))}var fe=n(304),pe=n(305);function he(){var e=Object(o.f)();return r.a.createElement(C.a,{marginBottom:10,elevation:2,padding:12},r.a.createElement(x.a,{height:Object(fe.a)(5),appearance:"minimal",intent:"warning",margin:Object(pe.a)(1),onClick:function(){return e.push(be)}},"Home"),r.a.createElement(x.a,{height:Object(fe.a)(5),appearance:"minimal",intent:"warning",margin:Object(pe.a)(1),onClick:function(){return e.push(Oe)}},"METRICS"))}function Ee(e){var t=e.children;return r.a.createElement(C.a,{elevation:1,borderLeft:"5px solid #dae4fc",style:{},paddingY:"1rem",paddingX:"1rem",marginX:"1rem"},t)}function ve(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,null),r.a.createElement(de,null))}function ye(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,null),r.a.createElement(Ee,null,r.a.createElement("p",null,"Home!!!")))}function ge(e){var t=e.children;return r.a.createElement(i.a,null,r.a.createElement(s,{routes:[{path:be,key:"ROOT",exact:!0,component:ye},{path:Oe,key:"GT",component:s,routes:[{path:Oe,key:"Index",exact:!0,component:ve}]}]}),t)}var be="/",Oe="/metrics";var we=function(){return r.a.createElement("div",null,r.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t){}},[[138,1,2]]]);
//# sourceMappingURL=main.14003799.chunk.js.map