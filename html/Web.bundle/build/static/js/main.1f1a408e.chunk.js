(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{121:function(e,t){},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(18),r=n.n(a),c=n(27),u=n(50),i=n(51),o=n(47),l=function(){function e(){Object(u.a)(this,e)}return Object(i.a)(e,null,[{key:"getAll",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("GET_ALL_METRICS");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createOne",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("CREATE_METRIC",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteOneByID",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("DELETE_METRIC_BY_ID",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOne",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.a)("EDIT_METRIC_BY_ID",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},141:function(e,t,n){e.exports=n(284)},146:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),u=n.n(c),i=(n(146),n(130)),o=n(17);function l(e){return r.a.createElement(o.a,{path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}function s(e){var t=e.routes;return r.a.createElement(o.c,null,t.map((function(e,t){return r.a.createElement(l,Object.assign({key:e.key},e))})),r.a.createElement(o.a,{component:function(){return r.a.createElement("h1",null,"404 Not Found!")}}))}var m=n(40),d=n(36),f="EDIT",p="CREATED",E={},h=function(e,t){var n=t.type||"UPDATE",a=t.payload||t;switch(n){case"UPDATE":return v(Object(d.a)(Object(d.a)({},e),a),e);case"SAVE_ROW":var r=a.id,c=Object.assign([],e.data),u=c.findIndex((function(e){return e.id===r}));return c[u]=Object.assign({},c[u],t.payload),v(Object(d.a)(Object(d.a)({},e),{},{data:c}),e);case"CREATE_ROW":var i=Object.assign([],e.data);return i.push(a),Object(d.a)(Object(d.a)({},e),{},{data:i});case"DELETE_ROW":var o=Object.assign([],e.data),l=o.findIndex((function(e){return e.id===a}));return o.splice(l,1),v(Object(d.a)(Object(d.a)({},e),{},{data:o}),e);case"DELETE_CREATE_ROW":var s=Object.assign([],e.data),m=s.findIndex((function(e){return e.id===a}));return s.splice(m,1),Object(d.a)(Object(d.a)({},e),{},{data:s});default:return e}};function v(e,t){return t.schema&&t.schema.eventsMiddleware.onStableStateChange&&t.schema.eventsMiddleware.onStableStateChange(e.data),e}var b=r.a.createContext();function g(e){var t=e.children,n=r.a.useReducer(h,E),a=Object(m.a)(n,2),c=a[0],u=a[1];return r.a.createElement(b.Provider,{value:{state:c,dispatch:u}},t)}var w=function(){return r.a.useContext(b)},y=n(18),O=n.n(y),C=n(27),j=n(309),T=n(97),x=n(132),R=n(108),S=(n(152),n(110)),k=n(50),I=n(51),D=n(133),M=n(131),A=n(306),_=n(304),W=n(126),N=n.n(W);function B(e){var t=e.cellSchema,n=e.cellState,a=void 0===n?"":n,c=e.onCellChange,u=e.editing,i=t.role,o=t.styles,l=t.formater,s=l?l(a):a;function m(e){c(e.target.value)}switch(i){case"ID":case"STATIC":return r.a.createElement(F,{style:o,value:s});case"INPUT":return r.a.createElement(L,{style:o,editing:u,onChange:function(e){return m(e)},value:s});case"TEXT_AREA":return r.a.createElement(V,{style:o,editing:u,onChange:function(e){return m(e)},value:s});case"DATE":return r.a.createElement(P,{style:o,editing:u,s:a,onChange:function(e){return c(e)},date:s,onChange1:function(e){return m(e)}});default:return r.a.createElement(H,{style:o})}}function L(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(A.a,{width:"100%",onChange:e.onChange,value:e.value}):e.value)}function V(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(_.a,{style:{marginTop:"10px",marginBottom:"10px"},minHeight:"auto",heigth:"10px",width:"100%",resize:"vertical",onChange:e.onChange,value:e.value}):e.value)}function H(e){return r.a.createElement(j.a.TextCell,{style:e.style},"Not found(")}function F(e){return r.a.createElement(j.a.TextCell,{style:e.style},e.value)}function P(e){return r.a.createElement(j.a.TextCell,{style:e.style},!0===e.editing?r.a.createElement(N.a,{selected:Date.parse(e.s),onChange:e.onChange,customInput:r.a.createElement(U,{date:e.date,onChange:e.onChange1}),timeIntervals:1,timeFormat:"HH:mm",showTimeSelect:!0}):e.date)}var U=function(e){Object(D.a)(n,e);var t=Object(M.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(A.a,{onClick:this.props.onClick,onChange:function(t){return e.props.onChange(t)},value:this.props.date})}}]),n}(r.a.Component),J=n(310),Y=n(305),G=n(311),X=n(111),z={maxWidth:"4rem"};function $(e){var t=e.menuItems;return r.a.createElement(J.a,{position:Y.a.BOTTOM_LEFT,content:r.a.createElement(G.a,null,r.a.createElement(G.a.Group,null,t.map((function(e){return r.a.createElement(G.a.Item,Object.assign({},e,{key:e.title}),e.title)}))))},r.a.createElement(X.a,{style:{cursor:"pointer"}}))}function q(e){var t=e.rowID,n=e.schema,c=e.rowStatus,u=e.setEditingRow,i=w(),o=i.state,l=i.dispatch,s=o.schema.eventsMiddleware,d=Object(a.useState)(b()),E=Object(m.a)(d,2),h=E[0],v=E[1];function b(){return o.data.find((function(e){return e.id===t}))}function g(e,t){return y.apply(this,arguments)}function y(){return(y=Object(C.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,t(n);case 3:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(){v(b()),u(null)},x=function(){u({id:t,status:f})},R=function(){u(null)},k=function(){return Object(C.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,g(s.onSaveNewRow,h);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},I=function(){return Object(C.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(s.onDdleteNewRow,h.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_CREATE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},D=function(){return Object(C.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(s.onDelete,h.id);case 2:t=e.sent,"STATIC"!==c&&u(null),l({type:"DELETE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},M=function(){return Object(C.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),e.next=3,g(s.onSave,h);case 3:t=e.sent,l({type:"SAVE_ROW",payload:t});case 5:case"end":return e.stop()}}),e)})))()},A=[{icon:"edit",title:"Edit",color:"muted",style:{cursor:"pointer"},onSelect:function(){return x()},on:["STATIC"]},{icon:"tick-circle",title:"Save",onSelect:function(){return M()},on:[f]},{icon:"tick-circle",title:"Create",onSelect:function(){return k()},on:[p]},{icon:"cross",title:"Cancel",onSelect:function(){return R()},on:[f]},{icon:"arrow-left",title:"Return",onSelect:function(){return T()},on:[f]},{icon:"trash",title:"Delete",onSelect:function(){return D()},on:[f,"STATIC"]},{icon:"trash",title:"Delete",onSelect:function(){return I()},on:[p]}].filter((function(e){return 0===e.on.length||e.on.includes(c)}));return r.a.createElement(j.a.Row,{height:"auto",style:{minHeight:"45px"}},n.body.map((function(e){var t=e.key,n=h[t],a=[f,p].includes(c);return r.a.createElement(B,{key:t,cellState:n,onCellChange:function(e){var n=Object.assign({},h);n[t]=e,v(n)},cellSchema:e,editing:a})})),r.a.createElement(j.a.Cell,{style:z},"STATIC_DISABLED"===c?r.a.createElement(S.a,null):r.a.createElement($,{menuItems:A})))}function K(e){var t=e.data,n=e.schema,c=Object(a.useState)(null),u=Object(m.a)(c,2),i=u[0],o=u[1],l=w(),s=l.state,d=l.dispatch,f=n.eventsMiddleware;Object(a.useEffect)((function(){d({schema:n,data:t})}),[]);var E=function(){return Object(C.a)(O.a.mark((function e(){var t,n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.onRowCreate(),n=Object(m.a)(t,2),a=n[0],r=n[1],a&&a.id&&r&&o({id:a.id,status:p}),d({type:"CREATE_ROW",payload:a});case 3:case"end":return e.stop()}}),e)})))()};return s.data?r.a.createElement("div",null,r.a.createElement(j.a,null,r.a.createElement(j.a.Head,null,n.body.map((function(e,t){return r.a.createElement(j.a.TextHeaderCell,{style:e.styles,key:t},e.header)})),r.a.createElement(j.a.TextHeaderCell,{style:z})),r.a.createElement(j.a.Body,{style:{overflowY:"scroll"}},s.data&&s.data.map((function(e){var t=i&&e.id===i.id?i.status:null===i?"STATIC":"STATIC_DISABLED";return r.a.createElement(q,{key:e.id,rowID:e.id,schema:n,rowStatus:t,setEditingRow:o})})))),r.a.createElement(T.a,{display:"flex",alignItems:"center",justifyContent:"center",margin:"7px"},null===i&&r.a.createElement(x.a,{onClick:function(){return E()}},r.a.createElement(R.a,null)))):r.a.createElement("p",null,"No data...")}function Q(e){return r.a.createElement(g,null,r.a.createElement(K,e))}var Z=n(55),ee={maxWidth:"5rem"};function te(e){var t=e.setMetrics;return{eventsMiddleware:{onStableStateChange:function(e){t(e)},onSave:function(e){return Z.MetricsManager.editOne(e).then((function(e){return console.log("Saved!")})),e},onDelete:function(e){return Z.MetricsManager.deleteOneByID(e).then((function(e){return console.log("DELETED!")})),e},onSaveNewRow:function(e){return Z.MetricsManager.createOne(e).then((function(e){return console.log("Saved!")})),e},onRowCreate:function(){return[{id:Math.random().toString(36).substring(7),date:new Date},!0]}},body:[{header:"Date",key:"date",role:"DATE",formater:function(e){return function(e){return e?new Intl.DateTimeFormat("ru",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e)):"No Date detected"}(e)}},{header:"\xb0\u0421",styles:ee,key:"temperature",role:"INPUT"}]}}function ne(e){return r.a.createElement("div",null,e.metrics.length?r.a.createElement(Q,{data:e.metrics,schema:te(e)}):r.a.createElement("p",null,"Waiting..."))}var ae=n(129),re=n.n(ae);function ce(e){var t=e.metrics,n=Object(a.createRef)();return Object(a.useEffect)((function(){if(t.length){var e=t.map((function(e){return new Intl.DateTimeFormat("ru",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).format(Date.parse(e.date))})),a=t.map((function(e){return e.temperature}));new re.a(n.current.getContext("2d"),{type:"line",data:{labels:e,datasets:[{label:"Temperature",data:a}]},options:{}})}}),[t]),r.a.createElement("div",{style:{margin:"5px 20px 5px 0"}},r.a.createElement("canvas",{id:"myChart",ref:n}))}function ue(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(n),i=Object(m.a)(u,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){Z.MetricsManager.getAll().then((function(e){c(e),l(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{metrics:o,setMetrics:c}),r.a.createElement(ce,{metrics:n,setMetrics:c}))}var ie=n(307),oe=n(308);function le(){var e=Object(o.f)();return r.a.createElement(T.a,{marginBottom:10,elevation:2,padding:12},r.a.createElement(x.a,{height:Object(ie.a)(5),appearance:"minimal",intent:"warning",margin:Object(oe.a)(1),onClick:function(){return e.push(pe)}},"Home"),r.a.createElement(x.a,{height:Object(ie.a)(5),appearance:"minimal",intent:"warning",margin:Object(oe.a)(1),onClick:function(){return e.push(Ee)}},"METRICS"))}function se(e){var t=e.children;return r.a.createElement(T.a,{elevation:1,borderLeft:"5px solid #dae4fc",style:{},paddingY:"1rem",paddingX:"1rem",marginX:"1rem"},t)}function me(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null),r.a.createElement(ue,null))}function de(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,null),r.a.createElement(se,null,r.a.createElement("p",null,"Home!!!")))}function fe(e){var t=e.children;return r.a.createElement(i.a,null,r.a.createElement(s,{routes:[{path:pe,key:"ROOT",exact:!0,component:de},{path:Ee,key:"GT",component:s,routes:[{path:Ee,key:"Index",exact:!0,component:me}]}]}),t)}var pe="/",Ee="/metrics";var he=function(){return r.a.createElement("div",null,r.a.createElement(fe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(47).b.init(),u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n(18),r=n.n(a),c=n(27),u=n(50),i=n(51),o=function(){function e(){Object(u.a)(this,e)}return Object(i.a)(e,null,[{key:"init",value:function(){window.ReactNativeWebViewResponseRR=function(e,t){window.ReactNativeWebViewResponse[e](JSON.parse(t))}}}]),e}();function l(e){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(r.a.mark((function e(t){var n,a=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:"",window.ReactNativeWebView){e.next=3;break}throw Error("[ERR] Used outside React Native Webview!");case 3:return e.next=5,new Promise((function(e){var a=Math.random().toString(36).substring(7)+Math.random().toString(36).substring(7),r=JSON.stringify({key:t,data:n,hash:a});window.ReactNativeWebView.postMessage(r),window.ReactNativeWebViewResponse||(window.ReactNativeWebViewResponse={}),window.ReactNativeWebViewResponse[a]=function(t){e(t),window.ReactNativeWebViewResponse[a]=null}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},55:function(e,t,n){"use strict";var a=n(121);n.o(a,"MetricsManager")&&n.d(t,"MetricsManager",(function(){return a.MetricsManager}));var r=n(122);n.d(t,"MetricsManager",(function(){return r.a}))}},[[141,1,2]]]);
//# sourceMappingURL=main.1f1a408e.chunk.js.map